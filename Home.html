
     
     <style>
       #frame{
         width:100%;
         height:100%;
         position:fixed;
         top:0;
         left:0;
       }
     </style>
       <!--
       <i class="fas fa-search"></i>
       -->  <meta name="viewport" content="width=device-width, initial-scale=1.0">
         <title>VE-NI</title>
          <link rel="icon" href="https://i.postimg.cc/y3CkWfz7/UNMEET-free-file.png" sizes="16x16" type="image/jpg">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300&display=swap" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Tangerine&display=swap" rel="stylesheet">
      <script src="https://kit.fontawesome.com/5023e0b475.js" crossorigin="anonymous"></script>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-database.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyBT52E5l2E5bK4C7e-WiiqzyS_Hk-O8XTY",
    authDomain: "veni-from-firebase.firebaseapp.com",
    projectId: "veni-from-firebase",
    storageBucket: "veni-from-firebase.appspot.com",
    messagingSenderId: "933933449270",
    appId: "1:933933449270:web:d00e6c092e603a97031897",
    measurementId: "G-014KXJMK1M"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script><style>
  #Header{
    height:50;
    border-bottom:1px solid silver;     display:flex; align-items:center; font-size: ;
  }
  #veni{
    width:100%;
    height:100%;
   /* border:1px solid black;*/
    position:fixed;
    top:0;
    left:0;
    display:block;
  }
  #search{
        width:100%;
    height:100%;
    
   /* border:1px solid black;*/
    position:fixed;
    top:0;
    left:0;
    display:block;
  }
  #post{
    width:100%;
    height:100%;
    /*border:1px solid black;*/
    position:fixed;
    top:0;
    left:0;
    display:none;
  }
  #but{
   /* width:345px;
    height:70px;
    background: #4CAF50;
    border:none;
    padding:10px;
    display:flex;
    align-items:center;
    justify-content:center;
  }*/
  background-color: #4CAF50; /* Green */
  width:90%;
  border: none;
  color: white;
  padding: 15px 32px;
  align-items:center;
  justify-content:center;
  display: inline-block;
  font-size: 16px;
  cursor:pointer;
  }
    #but2{
   /* width:345px;
    height:70px;
    background: #4CAF50;
    border:none;
    padding:10px;
    display:flex;
    align-items:center;
    justify-content:center;
  }*/
  background-color: #4CAF50; /* Green */
  width:90%;
  border: none;
  color: white;
  padding: 15px 32px;
  align-items:center;
  justify-content:center;
  display: inline-block;
  font-size: 16px;
  cursor:pointer;
  display:none;
  }
  #Edit{
    background-color: #4CAF50; /* Green */
  width:90%;
  border: none;
  color: white;
  padding: 15px 32px;
  align-items:center;
  justify-content:center;
  display: inline-block;
  font-size: 16px;
  cursor:pointer;
  }
  #video{
    width:100%;
    height:345px;
    display:none;
  }
  #left{
    position:fixed;
    top:0;
    left:0;
    font-size:30;
  }
  #venivideo{
    width:100%;
    height:100%;
    border:1px solid black;
    overflow:scroll;
  }
  #Profileicon{
    width:30px; height:30px; border-radius:50%;
  }
  #view{
    width:100%;
    height:100%;
    background:black;
    position:fixed;
    top:0;
    left:0;
    display:none;
  }
</style>

<script>
var score = -1;
window.onload = function(){
var q = document.getElementById("length").innerHTML.length;

}
//alert(localStorage.getItem("name"))
var vid;
var pos;
if(localStorage.getItem("name") == null){
  localStorage.setItem("name","")
}
if(localStorage.getItem("image") == null){
  localStorage.setItem("image","")
}
if(localStorage.getItem("pp") == null){
  localStorage.setItem("pp","https://i.postimg.cc/y3CkWfz7/UNMEET-free-file.png")
}

function post(){
  document.getElementById("veni").style.display = "none";
  document.getElementById("post").style.display = "block";
}
function choose(){
  document.getElementById("file").click();
  document.getElementById("but2").style.display = "block";
}
function chooseposter(){
  document.getElementById("file2").click();
}
  var openFile = function(event) {
    var input = event.target;
    
    var reader = new FileReader();
    reader.onload = function(){
      var dataURL = reader.result;
      vid = dataURL;
     // console.log(vid)
      var output = document.getElementById('video');
     output.style.display = "block";
     document.getElementById("form").style.display = "block";
    output.src = dataURL;
      
       
        
    //  document.getElementById("file2").click();
        
       
      
    //  localStorage.setItem("pe",dataURL);
    };
    reader.readAsDataURL(input.files[0]);
  };
  var openFile2 = function(event) {
    var input = event.target;
    
    var reader = new FileReader();
    reader.onload = function(){
      var dataURL = reader.result;
      pos = dataURL;
      var output = document.getElementById('video');
      output.style.display = "block";

      output.poster = dataURL;
      
       
        
    //  document.getElementById("file2").click();
        
       
      
    //  localStorage.setItem("pe",dataURL);
    };
    reader.readAsDataURL(input.files[0]);
  };
  var openFile3 = function(event) {
    var input = event.target;
    
    var reader = new FileReader();
    reader.onload = function(){
      var dataURL = reader.result;
      
      var output = document.getElementById('pi');
localStorage.setItem("pp",dataURL);
      
       
        
    //  document.getElementById("file2").click();
        
       
      
    //  localStorage.setItem("pe",dataURL);
    };
    reader.readAsDataURL(input.files[0]);
  };
  function change(){
    document.getElementById("pf").click();
  }
  function goback(){
    document.getElementById("veni").style.display = "block";
    document.getElementById("post").style.display = "none";
  }
  setInterval(function(){
    document.getElementById("pi").src = localStorage.getItem("pp");
  })
function send(){
  var message = document.getElementById("title").value;
 var now = new Date();
    var hours = now.getHours();
    var minutes = now.getMinutes();
    var date = now.getDate();
    
    
    var getday = now.getDay();
    var dayarray = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
    var day = dayarray[getday];
    
    var getmonth = now.getMonth();
    var montharray = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
    var month = montharray[getmonth];
    
    var time = hours + ":" + minutes + " " + day + " " + date + " " + month;
  
    document.getElementById("time").value = time;
    var time = document.getElementById("time").value;
    
    
		// save in database
		
		firebase.database().ref("messages").push().set({
		
			"video": vid,
			"poster": pos,
		  "profileicon": localStorage.getItem("pp"),
		  "title": message,
		  "from": localStorage.getItem("name"),
		  "time": time,
		  "watch": 0
		});

		// prevent form from submitting
		return false;
	
} 
var va = [];
firebase.database().ref("messages").on("child_added", function(snap){
console.log(snap.val().watch)
/*var vid = document.createElement("video");
vid.setAttribute("id","vid");
vid.setAttribute("src",snap.val().video)*/
document.getElementById("loader").style.display = "none";
var div = document.createElement('div');
 div.setAttribute("style","    max-width:100%; position:relative; margin: 20px 0px; height:415px; background:white;");
 div.setAttribute("id",snap.key);
   var v = document.createElement("video");
   v.innerHTML = "Veni";
   v.setAttribute("src",snap.val().video);
   v.poster = snap.val().poster;
   v.setAttribute("style","width:100%; height:345px; position:relative; overflow-y:scroll; ");
   v.setAttribute("controls","controls");
   v.onended = function(){
   var watch = snap.val().watch;
     var watched = watch += 1;
     var sk = snap.key;
     var up = {
       "watch": watched
     }
     if(snap.val().from !== localStorage.getItem("name")){
    firebase.database().ref("messages").child(sk).update(up);
     } 
   }
//   v.setAttribute("id","video");
    score++;
    
    v.setAttribute("id",score)
 
    var p = document.createElement("p");
    var p2 = document.createElement("p");
    p.setAttribute("style","  font-family:Sans-Serif; position:relative; top:-10; left:34px; word-break: break-all;");
    var p3 = document.createElement("p");
    if(snap.val().watch == 0 || snap.val().watch == 1){
    p3.innerHTML = snap.val().watch + " " + "view";
    } else {
      p3.innerHTML = snap.val().watch + " " + "views";
    }
    p3.setAttribute("style","position:relative; font-family:Sans-Serif; top:-85; left:34px; word-break: break-all;")

    
 // console.log(score);
    p.setAttribute("id",score);
   // console.log(p.id);
    var image = document.createElement("img");
    image.setAttribute("src",snap.val().profileicon);
    image.setAttribute("onclick","preview(event)");
    image.setAttribute("style","width:30px; height:30px; border-radius:50%; position:relative; top:-40px;")
    p.innerHTML = snap.val().title;
    if(localStorage.getItem("name") == snap.val().from || localStorage.getItem("name") == "VE-NI"){
      p2.innerHTML = snap.val().from + " <button style='border:none; background:white;' onclick='dm(this);' data-id='" + snap.key + "'><i class='fas fa-trash'></i></button>" + snap.val().time;
    } else {
    p2.innerHTML = snap.val().from + " " + snap.val().time;
    }
   va.push(p.innerHTML);
   
   p2.setAttribute("style","font-family:Sans-Serif; color:silver;position:relative; top:-70;left:40;");
   var veni = document.getElementById("venivideo");
  //  console.log(p.innerHTML.length);
    var nodiv = document.createElement("div");
    nodiv.setAttribute("style","width:100%; height:50px; border-bottom:1px solid silver;");
    veni.appendChild(div);
    veni.appendChild(nodiv);
    div.appendChild(v);
    div.appendChild(p);
    div.appendChild(image);
    div.appendChild(p2);
    div.appendChild(p3);

})
function dm(self){
  var mid = self.getAttribute("data-id");
  firebase.database().ref("messages").child(mid).remove();
  
}
firebase.database().ref("messages").on("child_removed", function(snap){
  document.getElementById(snap.key).style.display = "none";
})



function preview(event){
  document.getElementById("veni").style.display = "none";
  document.getElementById("view").style.display = "block";
  document.getElementById("vi").src = event.target.src;
  document.getElementById("db").href = event.target.src;
} 
function close(){
    alert(":")
}
function get(){
  document.getElementById("view").style.display = "none";
  document.getElementById("veni").style.display = "block";
}
function Edit(){
  document.getElementById("nameedit").style.display = "block";
}
function goback2(){
  document.getElementById("veni").style.display = "block";
  document.getElementById("profile").style.display = "none";
}
function op(){
  document.getElementById("veni").style.display = "none";
  document.getElementById("profile").style.display = "block";
}
function searchit(){
  document.getElementById("searchvideo").style.display = "block";
 var evalue = document.getElementById("searchbar").value;
  for(var i = 0; i < va.length; i++){
    if(evalue == va[i]){
      var s = document.getElementById(i).src;
     var p = document.getElementById(i).getAttribute("poster");
    // console.log(p)
      document.getElementById("searchvideo").src = s;
      document.getElementById("searchvideo").poster = p;
    }
  }
}
function opensearch(){
  document.getElementById("veni").style.display = "none";
  document.getElementById("videosearch").style.display = "block";
}
function closesearch(){
document.getElementById("veni").style.display = "block";
  document.getElementById("videosearch").style.display = "none";
}
window.onload = function(){
  if(localStorage.getItem("name") == ""){
  openweb();
  }
}
function openweb(){
    document.getElementById("git").click();
   }
  
 // alert(localStorage.getItem("name"))
  </script>
  <!--
  chrome of login content://media/external/file/243100
  localhost of login http://localhost:8158/Login.html
  -->
   <a href="/veni/Login.html" style="display:none;" id="git">git2</a>
  <style>
    #div{
        max-width:100%; position:relative; margin: 20px 0px; height:400px; background:white; border-bottom:1px solid silver;
    }
    #vid{
      width:345px; height:345px; position:relative; overflow-y:scroll; 
    }
    #img{
      width:30px; height:30px; border-radius:50%;
    }
    #p{
      position:relative; top:-40; left:34px; word-break: break-all;
    }
    #profile{
      width:100%;
      height:100%;

      display:none;
      position:fixed;
      top:0;
      left:0;
    }
    
  </style>
<div id="veni">
<div id="Header">
  
<font style="font-family: 'Fredoka One', cursive;" size="5" color="#009bff">VE-NI</font>
<i class="far fa-user-circle" style="position:fixed; top:10; left:85%; font-size:35;" onclick="op();"></i>
       <i class="fas fa-search" style="position:fixed; top:10; left:55%; font-size:35;" onclick="opensearch();"></i><i class="fas fa-plus" style="position:fixed; top:10; left:70%; font-size:35;" onclick="post();"></i>
</div>

<!--<div style="max-width:100%; position:relative;  margin: 20px 0px; height:400px; background:white; border-bottom:1px solid silver;">
  <center><video controls id="e" src="Vid.mp4" style="width:345px; height:345px; position:relative; overflow-y:scroll; "></video></center>
<img src='https://i.postimg.cc/y3CkWfz7/UNMEET-free-file.png' style="width:30px; height:30px; border-radius:50%;">
<p style="position:relative; top:-40; left:34px; word-break: break-all;" id="length">The game Which i created Th <br>game which i  hhh (from sourabh)
</div>-->
<div id="venivideo">
  <br>
  <br>
  <br>
</div>
</div>
<div id="post"> 
  <i class="fas fa-arrow-left" id="left" onclick="goback();"></i>
  <center>
      
<U><font style="font-family: 'Fredoka One', cursive;" size="5" color="#009bff">VE-NI</font>
</U>
<input onchange="openFile(event);"type="file" id="file" style="position:fixed; top:0; left:0; display:none;">
<input onchange="openFile2(event);"type="file" id="file2" style="position:fixed; top:0; left:0; opacity:0; display:none;" onchange="openFile2(event);">
    <br>
    <br>
    <br>
  <button id="but" onclick="choose();">POST</button>
  <br>
  <br>

  <button id="but2" onclick="chooseposter();"><i class="fas fa-image"></i> Thumbnail</button>
  <br>
  <br>
  <video id="video" src="" poster="" controls></video>
<form id="form" style="display:none;">
<input style="width:300px; border-radius:10px; height:50px; outline:none; border:1px solid black; position:relative; display:inline-block;" id="title">
<i class="fab fa-telegram-plane" style="font-size:35; position:relative; display:inline-block; top:5px;" onclick="send();"></i>

</form>
  </center>
</div>
<div id="view">
<i class="fas fa-arrow-left" id="left" style="color:white;" onclick="get();"></i>

    <img style="width:150px; height:150px; position:relative; top:50%; left:25%;" id="vi">
      <a id="db" download><button id="download" style="background-color: #4CAF50; /* Green */
  width:90%;
  border: none;
  color: white;
  padding: 15px 32px;
  align-items:center;
  justify-content:center;
  display: inline-block;
  font-size: 16px;
  cursor:pointer;
  position:relative;
  left:5%;">Download</button></a>

</div>
    <div id="profile">
      <i class="fas fa-arrow-left" id="left" style="color:black;" onclick="goback2();"></i>
      
      <center>
        <input id="pf" type="file" style="display:none;" onchange="openFile3(event);">
      <img  id="pi"  style="border-radius:50%; width:164px; height:164px;" onclick="change();">
      <br>
      <br>
      <hr style="color:silver;">


      </center>
      </div>
      <style>
        #videosearch{
          width:100%;
          height:100%;
          position:fixed;
          top:0;
          left:0;
          display:none;
        }
        #searchbar{
          width:80%;
          height:30px;
          outline:none;
        }
    #searchvideo{
      width:100%;
      height:345px;
      display:none;
    }
      </style>
    <div id="videosearch">
      <center>
        
     <input id="searchbar" placeholder="search" oninput="searchit();">
     <br>
     <br>
     <br>
     <br>
     <video id="searchvideo" controls></video>
     <i class="fas fa-arrow-left" style="font-size:30; position:fixed; top:0; left:4;" onclick="closesearch();"></i>
      </center>
    </div>
       <input id="time" style="position:fixed; top:0; left:0; display:none; ">
       <center>
         
       <div id="loader"></div>
       </center>
       <style>
          #loader{
    width:25px;
    height:25px;
    border-radius:50%;
    border:4px solid #f3f3f3;
    border-top:4px solid /*#48d1cc*/rgb(89,94,94);
    animation:roll 1s linear infinite;

    position:relative;
    top:300;
    left:;
  }
  /*#loading{
    position:relative;
    top:260;
  }*/
  @keyframes roll{
    0%{
      transform:rotate(0deg);
    }
    100%{
      transform:rotate(360deg);
    }
  }
       </style>
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
  
